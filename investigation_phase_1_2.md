# Phase 1.2: 生徒ダッシュボードUI改善とバグ修正

## 修正項目
1. ✅ 生徒ダッシュボードのUI改善（3列レイアウト）
2. ✅ なかま選択の「けっていボタン」エラー修正
3. ⏳ ガチャのエラー修正（進行中）

## 完了した修正

### 1. 生徒ダッシュボードのUI改善
- `StudentDashboard.tsx`のグリッドレイアウトを`lg:grid-cols-4`から`lg:grid-cols-3`に変更
- 「もんだいにチャレンジ」「ガチャ」「スペシャルクエスト」が3列で綺麗に表示される

### 2. なかま選択の「けっていボタン」エラー修正
- **問題:** `server/routers/character.ts`で`userId`を使っていたが、実際のテーブルは`studentId`を使っている
- **修正:** `create`と`getMy`エンドポイントを修正して`studentId`を使用
- **追加修正:** `CharacterSelect.tsx`に既存キャラクターチェックを追加し、既にキャラクターを持っている場合は生徒ダッシュボードにリダイレクト

## 進行中の問題

### 3. ガチャのエラー
- **現象:** ガチャボタンをクリックしても反応がない、500エラーと400エラーが発生
- **確認済み:**
  - `Gacha.tsx`の`handleRoll`関数は正しく実装されている
  - `server/routers/gacha.ts`の`roll`エンドポイントは正しく実装されている
  - `getAllCharacterItems()`は正しく`gachaItems`テーブルから取得している
  - コインは10枚あるので、コイン不足ではない
  
- **次のステップ:**
  - ガチャボタンのクリックイベントが正しく発火しているか確認
  - `rollGachaMutation.mutate()`が正しく呼ばれているか確認
  - サーバーログを確認して実際のエラーメッセージを特定
